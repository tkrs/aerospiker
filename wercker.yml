build:
  services:
    - aerospike/aerospike-server

  box:
    id: 1science/sbt

  steps:
    - script:
        name: install git #for codecov
        code: |
          apk-install git

    - script:
        name: sbt coverage test
        code: |
          sbt coverage test

    - script:
        name: sbt example run
        code: |
          sbt "example/runMain Standard" "example/runMain LargeMap"

    - script:
        name: push report to codecov
        code: |
          bash <(curl -s https://codecov.io/bash)
